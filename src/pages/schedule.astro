---
import BaseLayout from '../layouts/BaseLayout.astro';
import Notice from '../components/Notice.astro';

const base = import.meta.env.BASE_URL;
const config = await import('../../data/config.json');
const seasonSchedule = await import('../../data/season-schedule.json');
---

<BaseLayout title="Schedule - Queens Park Rangers U11B">
  <div class="container">
    <header style="text-align: center; margin-bottom: var(--spacing-2xl);">
      <h1>⚽ Practice & Game Schedule 🏆</h1>
      <p>Regular practice times and upcoming fixtures for the 2025-2026 season.</p>
    </header>

    <div class="grid grid-2">
      <!-- Practice Schedule -->
      <div>
        <h2 class="soccer-icon">Practice Schedule</h2>
        <div class="card card-highlight team-highlight">
          <h3>🏃‍♂️ Weekly Practice</h3>
          <div style="font-size: var(--font-size-lg); margin: var(--spacing-md) 0;">
            <p><strong>Thursdays</strong></p>
            <p><strong>5:00 PM - 6:00 PM</strong></p>
            <p><strong>Mobilio West (Town Centre Park) - Grid D</strong></p>
          </div>
          <Notice type="info">
            <p><strong>Coach:</strong> Nagy Elshal<br>
            <strong>Team Level:</strong> U11B<br>
            <strong>Arrive:</strong> 10 minutes early for warm-up</p>
          </Notice>
        </div>

        <!-- Upcoming Training Dates -->
        <div class="card" style="margin-top: var(--spacing-lg);">
          <h4>📅 Upcoming Training Sessions</h4>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Time</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Sept 4</td>
                  <td>5:00 PM</td>
                  <td>✅ Confirmed</td>
                </tr>
                <tr>
                  <td>Sept 11</td>
                  <td>5:00 PM</td>
                  <td>✅ Confirmed</td>
                </tr>
                <tr>
                  <td>Sept 18</td>
                  <td>5:00 PM</td>
                  <td>✅ Confirmed</td>
                </tr>
                <tr>
                  <td>Sept 25</td>
                  <td>5:00 PM</td>
                  <td>✅ Confirmed</td>
                </tr>
                <tr style="background-color: rgba(255, 193, 7, 0.1);">
                  <td>Oct 10</td>
                  <td>-</td>
                  <td>❌ Thanksgiving Break</td>
                </tr>
              </tbody>
            </table>
          </div>
          <p style="color: var(--color-text-light); font-size: var(--font-size-sm); margin-top: var(--spacing-md);">
            <em>Training schedule may be adjusted due to weather. Check team news for updates.</em>
          </p>
        </div>
      </div>

      <!-- Game Schedule -->
      <div>
        <h2 class="soccer-icon">Game Schedule</h2>
        <div class="card game-card">
          <h3>🏆 NFYSA Boys U11 DIV 3</h3>
          <p><strong>Season:</strong> Fall/Winter 2025<br>
          <strong>Game Day:</strong> Saturdays<br>
          <strong>First Game:</strong> September 6, 2025</p>
          
          <Notice type="success" title="Fixtures Confirmed">
            <p>Our complete game schedule is now available! All games are scheduled for Saturdays with kickoff times and venues TBA.</p>
          </Notice>
        </div>

        <!-- Actual Game Schedule Table -->
        <div class="card" style="margin-top: var(--spacing-lg);">
          <h4>⚽ Season Fixtures</h4>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Week</th>
                  <th>Date</th>
                  <th>Opponent</th>
                  <th>Venue</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                {seasonSchedule.matches.map(match => (
                  <tr class={match.week === 1 ? 'next-game' : ''}>
                    <td>{match.week}</td>
                    <td>{new Date(match.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</td>
                    <td>
                      <strong>{match.venue === 'Home' ? '🏠' : '✈️'} {match.venue === 'Home' ? match.away_team : match.home_team}</strong>
                    </td>
                    <td>
                      <span class={match.venue === 'Home' ? 'venue-home' : 'venue-away'}>
                        {match.venue}
                      </span>
                    </td>
                    <td>
                      <span class="status-scheduled">📅 Scheduled</span>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          <div style="margin-top: var(--spacing-md);">
            <Notice type="info">
              <p><strong>Season Summary:</strong> {seasonSchedule.season_summary.total_matches} games total • {seasonSchedule.season_summary.home_matches} home • {seasonSchedule.season_summary.away_matches} away<br>
              <strong>Match Times:</strong> All kickoff times TBA by league<br>
              <strong>Match Numbers:</strong> Available for tracking in league system</p>
            </Notice>
          </div>
        </div>
      </div>
    </div>

    <!-- Season Calendar -->
    <section style="margin-top: var(--spacing-2xl);">
      <h2 class="soccer-icon">📅 Season Calendar 2025-2026</h2>
      <div class="grid grid-2">
        <div class="card card-highlight">
          <h3>🍂 Fall 2025</h3>
          <ul style="line-height: 1.8;">
            <li><strong>📅 Season Start:</strong> Thursday, Sept 4 (First Practice)</li>
            <li><strong>⚽ First Game:</strong> Saturday, Sept 6</li>
            <li><strong>🦃 No Practice/Games:</strong> Thanksgiving Oct 9 & 16</li>
            <li><strong>📅 Last Practice 2025:</strong> Thursday, Dec 12</li>
            <li><strong>⚽ Last Game 2025:</strong> Saturday, Dec 7</li>
          </ul>
        </div>
        
        <div class="card card-highlight">
          <h3>❄️ Winter Break & Spring 2026</h3>
          <ul style="line-height: 1.8;">
            <li><strong>❄️ Winter Break:</strong> Dec 15 – Jan 4</li>
            <li><strong>📅 Practice Resumes:</strong> Thursday, Jan 8</li>
            <li><strong>⚽ Games Resume:</strong> Saturday, Jan 11</li>
            <li><strong>👨‍👩‍👧‍👦 No Practice/Games:</strong> Family Day Feb 12</li>
            <li><strong>🏁 Season Ends:</strong> Late February 2026</li>
          </ul>
        </div>
      </div>
      
      <Notice type="info" title="Season Overview">
        <p>The 2025-2026 season runs from September through February with a winter break over the holidays. Practice and game schedules may be adjusted due to weather or field availability.</p>
      </Notice>
    </section>

    <!-- Important Reminders -->
    <section style="margin-top: var(--spacing-2xl);">
      <h2>Important Reminders</h2>
      <div class="grid grid-2">
        <Notice type="info" title="Practice Attendance">
          <p>Please arrive 10 minutes early for warmup. Bring water bottle, shin guards, and appropriate footwear.</p>
        </Notice>
        
        <Notice type="success" title="Weather Updates">
          <p>Check team news for any weather-related practice cancellations. Updates will be posted by 3 PM on practice days.</p>
        </Notice>
      </div>
    </section>
  </div>
</BaseLayout>

<style>
  .next-game {
    background-color: rgba(25, 118, 210, 0.1);
    border-left: 4px solid var(--color-primary);
  }
  
  .venue-home {
    background: rgba(76, 175, 80, 0.2);
    color: #2e7d32;
    padding: 4px 8px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 0.85rem;
  }
  
  .venue-away {
    background: rgba(255, 152, 0, 0.2);
    color: #ef6c00;
    padding: 4px 8px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 0.85rem;
  }
  
  .status-scheduled {
    background: rgba(25, 118, 210, 0.1);
    color: var(--color-primary);
    padding: 4px 8px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 0.85rem;
  }
  
  .game-card {
    border-left: 4px solid var(--color-primary);
  }
  
  .table tbody tr:hover {
    background-color: rgba(0, 0, 0, 0.02);
  }
</style>
